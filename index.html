<!DOCTYPE html>
<html>
    <head>
        <title>Random Quotes</title>
    </head>
    <body>
        <div class="container">
            <p id="displayQuote"></p>
            <p id="author"></p>
            <button id="getQuote" onclick="getQuote()">Click me for a random quote</button>
        </div>
    </body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        const API_KEY = ""; //your LibraryThing API key goes here
        workId = "4041453";
        function getQuote(){
            fetch('http://www.librarything.com/services/rest/1.1/?method=librarything.ck.getwork&id='+ workId + '&apikey=' + API_KEY)
            .then(res => res.text())
            .then(xmlText => (new window.DOMParser()).parseFromString(xmlText, "text/xml"))
            .then((xmlDoc) => {
                console.log(xmlDoc);
                let fields = xmlDoc.getElementsByTagName("field");
                let relevantFields = [10, 14, 15];
                let randomField =  relevantFields[Math.floor(Math.random() * relevantFields.length)];
                let selectedField = fields[randomField];
                let factFields = selectedField.getElementsByTagName("fact");
                let randomFactIdx = Math.floor(Math.random() * factFields.length);
                let randomQuote = factFields[randomFactIdx].childNodes[0].nodeValue;
                randomQuoteCleaned = randomQuote.replace(/(\!\[CDATA\[)|(\]\]\>)/g, "");
                document.getElementById("displayQuote").innerText = randomQuoteCleaned;
            }
            )}
    </script>
</html>